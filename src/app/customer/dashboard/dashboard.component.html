<app-header></app-header>
<div class="container vh-100" style="margin-top: 100px;" *ngIf="!customerLoading && !orderLoading;else componentLoader">
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card request-card shadow-lg text-center justify-content-center"
                *ngIf="customer.requested != 'true';else requested" (click)="requestConnection()">
                <h1 class="pi pi-plus fw-bolder" style="font-size: 50px;"></h1>
                <h1 class="h5 fw-normal">Request new connection</h1>
            </div>
            <ng-template #requested>
                <div class="card request-card shadow-lg text-center justify-content-center">
                    <h1 class="h6 fw-normal">Connection status</h1>
                    <h1 class="h1 fw-bold">Requested</h1>
                </div>
            </ng-template>

        </div>
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card shadow-lg text-center justify-content-center" style="cursor: pointer;"
                routerLink="/customer/products">
                <ngb-carousel>
                    <ng-template ngbSlide *ngFor="let product of products">
                        <div class="picsum-img-wrapper">
                            <img [src]="product.productImage" style="height: 250px; width: 100%; border-radius: 20px;"
                                alt="Random first slide">
                        </div>
                        <div class="carousel-caption">
                            <h3>{{product.productName}} - {{product.productWeight}} kg</h3>
                            <p>â‚¹ {{product.productPrice}}</p>
                        </div>
                    </ng-template>
                </ngb-carousel>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="card shadow-lg text-center justify-content-center" *ngIf="orders.length > 0;else orderNow">
                <h1 class="h6 fw-normal" style="color: rgb(177, 177, 177);">Last ordered date</h1>
                <h1 class="h1 fw-bold">{{orders[0].orderDate | date}}</h1>

                <h1 class="h6 fw-normal mt-3" style="color: rgb(177, 177, 177);">Next order date</h1>
                <h1 class="h1 fw-bold">{{nextOrderDate | date}}</h1>
            </div>
            <ng-template #orderNow>
                <div class="card shadow-lg text-center justify-content-center" routerLink="/customer/products">
                    <h1 class="h6 fw-normal mt-3" style="color: rgb(177, 177, 177);">Welcome to GasB360</h1>
                    <h1 class="h1 fw-bold">Order now</h1>
                </div>
            </ng-template>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 mt-4">
            <div class="card">
                <p-chart type="line" [data]="basicData"></p-chart>
            </div>
        </div>

    </div>
</div>

<ng-template #componentLoader>
    <p-progressBar mode="indeterminate" [style]="{'height': '4px', 'margin-top': '60px'}"></p-progressBar>
</ng-template>